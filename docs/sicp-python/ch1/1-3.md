# 1.3 定义新的函数

我们已经在 Python 中确定了强大的编程语言中一些必须出现的要素：

1. ==基础的内置数值和函数==：数字和算术运算。
2. ==组合方式==：嵌套函数。
3. ==抽象方式==：将名称与值绑定。

现在我们将学习==如何定义函数==，这是一种更为强大的抽象技术，通过它可以将名称与复合操作绑定为一个单元。

首先来研究一下==平方==的概念。我们可能会说：“一个数乘以它本身就是平方。” 这在 Python 中可以表示为

```py
>>> def square(x):
        return mul(x, x)
```

上面的代码定义了一个名为 `square` 的新函数，这个用户定义的函数并不会内置到解释器中，它表示将某值与自身相乘的复合运算。这个定义将 `x` 作为要平方的值的的名称，称为==形参==，同时也将此函数与名称 `square` 绑定。

**How to define a function.** Function definitions consist of a def statement that indicates a <name> and a comma-separated list of named <formal parameters>, then a return statement, called the function body, that specifies the <return expression> of the function, which is an expression to be evaluated whenever the function is applied:  
==如何定义函数==：函数定义包含 `def` 语句、 `<name 函数名>` 和一个以逗号分隔的 `<formal parameters 形参>` 列表，然后是一个被称为函数体的 `return` 语句，它指定了调用函数时要计算的表达式，也就是函数的 `<return expression 返回表达式>` ：

```py
def <name>(<formal parameters>):
    return <return expression>
```

函数的第二行==必须==进行缩进 —— 大多数程序员使用四个空格。返回表达式会作为新定义的函数的一部分存储，并且仅在最终调用该函数时才进行求值。

定义了 `square` 之后，我们可以调用它：

```py
>>> square(21)
441
>>> square(add(2, 5))
49
>>> square(square(3))
81
```

我们还可以将 `square` 作为一个构建单元来定义其他函数。例如，我们可以很容易地定义一个函数 `sum_squares` ，给定任意两个数字作为参数，返回它们的平方和：

```py
>>> def sum_squares(x, y):
        return add(square(x), square(y))

>>> sum_squares(3, 4)
25
```

用户定义函数的使用方式与内置函数完全相同。实际上，从 `sum_squares` 的定义中我们并不能判断 `square` 是内置于解释器中、从模块中导入还是由用户定义？

`def` 语句和赋值语句都将名称与值绑定，并且绑定后任何之前的绑定都将丢失。例如，下面的 `g` 首先指的是一个没有参数的函数，然后是指一个数字，最后是一个含有两个参数的函数。

```py
>>> def g():
        return 1
>>> g()
1
>>> g = 2
>>> g
2
>>> def g(h, i):
        return h + i
>>> g(1, 2)
3
```